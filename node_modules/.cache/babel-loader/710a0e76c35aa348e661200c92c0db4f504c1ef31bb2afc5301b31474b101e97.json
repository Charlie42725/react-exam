{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\linei\\\\Desktop\\\\coding\\\\exam\\\\src\\\\components\\\\ExamStructureSection.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../styles/components/PracticeSection.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3001/api';\nfunction ExamStructureSection() {\n  _s();\n  const [structures, setStructures] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [category, setCategory] = useState(null);\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // 獲取分類信息\n      console.log('正在獲取分類信息...');\n      const categoryResponse = await axios.get(`${API_URL}/categories`);\n      console.log('分類響應:', categoryResponse.data);\n\n      // 查找會考架構分析分類\n      const structureCategory = categoryResponse.data.find(c => c.label === '會考架構分析');\n      console.log('找到的分類:', structureCategory);\n      if (!structureCategory) {\n        throw new Error('找不到會考架構分析分類，請先在後台添加此分類');\n      }\n      setCategory(structureCategory);\n\n      // 獲取該分類的內容\n      console.log('正在獲取分類內容:', structureCategory.label);\n      const response = await axios.get(`${API_URL}/contents?category=${structureCategory.label}`);\n      console.log('內容響應:', response.data);\n      if (!response.data || response.data.length === 0) {\n        console.log('該分類下沒有內容');\n      }\n      setStructures(response.data);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('獲取數據時出錯:', err);\n      const errorMessage = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message || '獲取數據失敗';\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  const handleRetry = () => {\n    fetchData();\n  };\n  const handleCopy = text => {\n    navigator.clipboard.writeText(text);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u8F09\\u5165\\u4E2D...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleRetry,\n        className: \"retry-button\",\n        children: \"\\u91CD\\u8A66\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"practice-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"section-title\",\n      children: (category === null || category === void 0 ? void 0 : category.label) || '會考架構分析'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"practice-grid\",\n      children: structures.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"no-content\",\n        children: \"\\u66AB\\u7121\\u5167\\u5BB9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this) : structures.map(structure => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"practice-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: structure.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: structure.prompt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this), structure.steps && structure.steps.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"steps\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u64CD\\u4F5C\\u6B65\\u9A5F\\uFF1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n            children: structure.steps.map((step, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: step\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"copy-button\",\n          onClick: () => handleCopy(structure.prompt),\n          children: \"\\u8907\\u88FD\\u63D0\\u793A\\u8A5E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this)]\n      }, structure._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n_s(ExamStructureSection, \"vrov1ju+PFwzXxWjVrISM8t8P9A=\");\n_c = ExamStructureSection;\nexport default ExamStructureSection;\nvar _c;\n$RefreshReg$(_c, \"ExamStructureSection\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","API_URL","ExamStructureSection","_s","structures","setStructures","loading","setLoading","error","setError","category","setCategory","fetchData","console","log","categoryResponse","get","data","structureCategory","find","c","label","Error","response","length","err","_err$response","_err$response$data","errorMessage","message","handleRetry","handleCopy","text","navigator","clipboard","writeText","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","structure","title","prompt","steps","step","index","_id","_c","$RefreshReg$"],"sources":["C:/Users/linei/Desktop/coding/exam/src/components/ExamStructureSection.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../styles/components/PracticeSection.css';\n\nconst API_URL = 'http://localhost:3001/api';\n\nfunction ExamStructureSection() {\n  const [structures, setStructures] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [category, setCategory] = useState(null);\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // 獲取分類信息\n      console.log('正在獲取分類信息...');\n      const categoryResponse = await axios.get(`${API_URL}/categories`);\n      console.log('分類響應:', categoryResponse.data);\n\n      // 查找會考架構分析分類\n      const structureCategory = categoryResponse.data.find(c => c.label === '會考架構分析');\n      console.log('找到的分類:', structureCategory);\n\n      if (!structureCategory) {\n        throw new Error('找不到會考架構分析分類，請先在後台添加此分類');\n      }\n\n      setCategory(structureCategory);\n\n      // 獲取該分類的內容\n      console.log('正在獲取分類內容:', structureCategory.label);\n      const response = await axios.get(`${API_URL}/contents?category=${structureCategory.label}`);\n      console.log('內容響應:', response.data);\n\n      if (!response.data || response.data.length === 0) {\n        console.log('該分類下沒有內容');\n      }\n\n      setStructures(response.data);\n    } catch (err) {\n      console.error('獲取數據時出錯:', err);\n      const errorMessage = err.response?.data?.error || err.message || '獲取數據失敗';\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const handleRetry = () => {\n    fetchData();\n  };\n\n  const handleCopy = (text) => {\n    navigator.clipboard.writeText(text);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <p>載入中...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"error\">\n        <p>{error}</p>\n        <button onClick={handleRetry} className=\"retry-button\">\n          重試\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <section className=\"practice-section\">\n      <h2 className=\"section-title\">{category?.label || '會考架構分析'}</h2>\n      <div className=\"practice-grid\">\n        {structures.length === 0 ? (\n          <p className=\"no-content\">暫無內容</p>\n        ) : (\n          structures.map((structure) => (\n            <div key={structure._id} className=\"practice-card\">\n              <h3>{structure.title}</h3>\n              <p>{structure.prompt}</p>\n              {structure.steps && structure.steps.length > 0 && (\n                <div className=\"steps\">\n                  <h4>操作步驟：</h4>\n                  <ol>\n                    {structure.steps.map((step, index) => (\n                      <li key={index}>{step}</li>\n                    ))}\n                  </ol>\n                </div>\n              )}\n              <button \n                className=\"copy-button\"\n                onClick={() => handleCopy(structure.prompt)}\n              >\n                複製提示詞\n              </button>\n            </div>\n          ))\n        )}\n      </div>\n    </section>\n  );\n}\n\nexport default ExamStructureSection; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,0CAA0C;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElD,MAAMC,OAAO,GAAG,2BAA2B;AAE3C,SAASC,oBAAoBA,CAAA,EAAG;EAAAC,EAAA;EAC9B,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAE9C,MAAMgB,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACFL,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;;MAEd;MACAI,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC1B,MAAMC,gBAAgB,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,GAAGf,OAAO,aAAa,CAAC;MACjEY,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEC,gBAAgB,CAACE,IAAI,CAAC;;MAE3C;MACA,MAAMC,iBAAiB,GAAGH,gBAAgB,CAACE,IAAI,CAACE,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,KAAK,KAAK,QAAQ,CAAC;MAC/ER,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEI,iBAAiB,CAAC;MAExC,IAAI,CAACA,iBAAiB,EAAE;QACtB,MAAM,IAAII,KAAK,CAAC,wBAAwB,CAAC;MAC3C;MAEAX,WAAW,CAACO,iBAAiB,CAAC;;MAE9B;MACAL,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEI,iBAAiB,CAACG,KAAK,CAAC;MACjD,MAAME,QAAQ,GAAG,MAAMzB,KAAK,CAACkB,GAAG,CAAC,GAAGf,OAAO,sBAAsBiB,iBAAiB,CAACG,KAAK,EAAE,CAAC;MAC3FR,OAAO,CAACC,GAAG,CAAC,OAAO,EAAES,QAAQ,CAACN,IAAI,CAAC;MAEnC,IAAI,CAACM,QAAQ,CAACN,IAAI,IAAIM,QAAQ,CAACN,IAAI,CAACO,MAAM,KAAK,CAAC,EAAE;QAChDX,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;MACzB;MAEAT,aAAa,CAACkB,QAAQ,CAACN,IAAI,CAAC;IAC9B,CAAC,CAAC,OAAOQ,GAAG,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA;MACZd,OAAO,CAACL,KAAK,CAAC,UAAU,EAAEiB,GAAG,CAAC;MAC9B,MAAMG,YAAY,GAAG,EAAAF,aAAA,GAAAD,GAAG,CAACF,QAAQ,cAAAG,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcT,IAAI,cAAAU,kBAAA,uBAAlBA,kBAAA,CAAoBnB,KAAK,KAAIiB,GAAG,CAACI,OAAO,IAAI,QAAQ;MACzEpB,QAAQ,CAACmB,YAAY,CAAC;IACxB,CAAC,SAAS;MACRrB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAEDV,SAAS,CAAC,MAAM;IACde,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMkB,WAAW,GAAGA,CAAA,KAAM;IACxBlB,SAAS,CAAC,CAAC;EACb,CAAC;EAED,MAAMmB,UAAU,GAAIC,IAAI,IAAK;IAC3BC,SAAS,CAACC,SAAS,CAACC,SAAS,CAACH,IAAI,CAAC;EACrC,CAAC;EAED,IAAI1B,OAAO,EAAE;IACX,oBACEN,OAAA;MAAKoC,SAAS,EAAC,SAAS;MAAAC,QAAA,eACtBrC,OAAA;QAAAqC,QAAA,EAAG;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC;EAEV;EAEA,IAAIjC,KAAK,EAAE;IACT,oBACER,OAAA;MAAKoC,SAAS,EAAC,OAAO;MAAAC,QAAA,gBACpBrC,OAAA;QAAAqC,QAAA,EAAI7B;MAAK;QAAA8B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACdzC,OAAA;QAAQ0C,OAAO,EAAEZ,WAAY;QAACM,SAAS,EAAC,cAAc;QAAAC,QAAA,EAAC;MAEvD;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAEV;EAEA,oBACEzC,OAAA;IAASoC,SAAS,EAAC,kBAAkB;IAAAC,QAAA,gBACnCrC,OAAA;MAAIoC,SAAS,EAAC,eAAe;MAAAC,QAAA,EAAE,CAAA3B,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEW,KAAK,KAAI;IAAQ;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAChEzC,OAAA;MAAKoC,SAAS,EAAC,eAAe;MAAAC,QAAA,EAC3BjC,UAAU,CAACoB,MAAM,KAAK,CAAC,gBACtBxB,OAAA;QAAGoC,SAAS,EAAC,YAAY;QAAAC,QAAA,EAAC;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,GAElCrC,UAAU,CAACuC,GAAG,CAAEC,SAAS,iBACvB5C,OAAA;QAAyBoC,SAAS,EAAC,eAAe;QAAAC,QAAA,gBAChDrC,OAAA;UAAAqC,QAAA,EAAKO,SAAS,CAACC;QAAK;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC1BzC,OAAA;UAAAqC,QAAA,EAAIO,SAAS,CAACE;QAAM;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACxBG,SAAS,CAACG,KAAK,IAAIH,SAAS,CAACG,KAAK,CAACvB,MAAM,GAAG,CAAC,iBAC5CxB,OAAA;UAAKoC,SAAS,EAAC,OAAO;UAAAC,QAAA,gBACpBrC,OAAA;YAAAqC,QAAA,EAAI;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACdzC,OAAA;YAAAqC,QAAA,EACGO,SAAS,CAACG,KAAK,CAACJ,GAAG,CAAC,CAACK,IAAI,EAAEC,KAAK,kBAC/BjD,OAAA;cAAAqC,QAAA,EAAiBW;YAAI,GAAZC,KAAK;cAAAX,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAC3B;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CACN,eACDzC,OAAA;UACEoC,SAAS,EAAC,aAAa;UACvBM,OAAO,EAAEA,CAAA,KAAMX,UAAU,CAACa,SAAS,CAACE,MAAM,CAAE;UAAAT,QAAA,EAC7C;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,GAlBDG,SAAS,CAACM,GAAG;QAAAZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAmBlB,CACN;IACF;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEd;AAACtC,EAAA,CA7GQD,oBAAoB;AAAAiD,EAAA,GAApBjD,oBAAoB;AA+G7B,eAAeA,oBAAoB;AAAC,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}